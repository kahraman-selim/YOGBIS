@*@model IEnumerable<YOGBIS.Common.VModels.MulakatSorulariVM>*@
@{
    ViewData["Title"] = "Mülakat";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section Styles {

    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/alertify.min.css" />
}

<style type="text/css">
    #soruBlok {
        display: none;
    }

    #AdayNotBlok {
        display: none;
    }

    #btnBitir {
        display: none;
    }

    #AdayBilgiBlok {
        display: none;
    }

</style>

<!-- Aday Özet Blok -->
<div class="row m-0 p-0">
    <div class="col-lg-12">
        <div class="card shadow-lg" style="height:75px">
            <h6 class="card-header text-center text-danger small">ADAY BİLGİLERİ - @DateTime.Now.ToShortDateString() </h6>
            <div class="card-body p-1">
                <p class="card-text text-center text-danger font-weight-bold">
                    <span id="adsoyad">Aday Adı Soyadı</span>
                    <span>-</span>
                    <span id="derece">Öğretmen</span>
                    <span>-</span>
                    <span id="brans">Branş</span>
                    <span>-</span>
                    <span id="ulke">Ülke Grubu</span> 
                </p>
            </div>
        </div>
        <div class="card shadow-lg" style="height:50px">
            <div class="card-body p-1">
                <p class="card-text text-center text-danger font-weight-bold p-1">
                    <input value="Bilgi Formu" class="btn btn-primary btn-sm ml-1" id="btnBilgi" />
                    <input value="Aday Sınava Girmedi" class="btn btn-danger btn-sm ml-1" id="btnIptal" />
                </p>
            </div>
        </div>
    </div>
</div>

<!-- Buton Blok -->
<div class="row m-0 mt-1">
    <div class="col-lg-12">
        <input type="number" class="form-control font-weight-bold text-center text-danger btn-outline-success" style="font-size:22px" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default" placeholder="Soru Numarasını Giriniz" id="soruno">
        <input type="submit" value="Mülakatı Başlat" class="btn btn-primary w-100 mt-1" id="btnBaslat" />
        <input type="submit" value="Mülakatı Bitir" class="btn btn-danger w-100 mt-1" id="btnBitir" />
    </div>
</div>

<!--Aday Bilgi Blok-->
<div class="row col-xl-12 m-0 mt-2" id="AdayBilgiBlok" disable>
    @await Component.InvokeAsync("AdayBilgi")
</div>

<!-- Not Blok-->
<div class="row col-xl-12 m-0 mt-2 disable" id="AdayNotBlok">
    @await Component.InvokeAsync("AdayNot")
</div>

<!-- Soru Blok -->
<div class="row col-xl-12 m-0 mt-2" id="soruBlok">
    <div class="row">
        <!--////////////////////////////////////////////////////-->
        <div class="col-xl-3">
            <h6 class="card-header text-center text-info font-weight-bold">KATEGORİ-1</h6>
            <div class="card shadow-lg" style="height: 300px">
                <h6 class="card-header text-center text-danger font-weight-bold">SORU</h6>
                <div class="card-body">
                    <p class="card-text">"Sebil ve Güvercinler " adlı eser kime aittir?</p>
                </div>
            </div>
            <div class="card shadow-lg mb-1" style="height:150px">
                <h6 class="card-header text-center text-primary font-weight-bold">CEVAP</h6>
                <div class="card-body">
                    <p class="card-text">Ziya Osman Saba</p>
                </div>
            </div>
        </div>
        <!--////////////////////////////////////////////////////-->
        <div class="col-xl-3">
            <h6 class="card-header text-center text-info font-weight-bold">KATEGORİ-1</h6>
            <div class="card shadow-lg" style="height: 300px">
                <h6 class="card-header text-center text-danger font-weight-bold">SORU</h6>
                <div class="card-body">
                    <p class="card-text">"Sebil ve Güvercinler " adlı eser kime aittir?</p>
                </div>
            </div>
            <div class="card shadow-lg mb-1" style="height:150px">
                <h6 class="card-header text-center text-primary font-weight-bold">CEVAP</h6>
                <div class="card-body">
                    <p class="card-text">Ziya Osman Saba</p>
                </div>
            </div>
        </div>
        <!--////////////////////////////////////////////////////-->
        <div class="col-xl-3">
            <h6 class="card-header text-center text-info font-weight-bold">KATEGORİ-1</h6>
            <div class="card shadow-lg" style="height: 300px">
                <h6 class="card-header text-center text-danger font-weight-bold">SORU</h6>
                <div class="card-body">
                    <p class="card-text">"Sebil ve Güvercinler " adlı eser kime aittir?</p>
                </div>
            </div>
            <div class="card shadow-lg mb-1" style="height:150px">
                <h6 class="card-header text-center text-primary font-weight-bold">CEVAP</h6>
                <div class="card-body">
                    <p class="card-text">Ziya Osman Saba</p>
                </div>
            </div>
        </div>
        <!--////////////////////////////////////////////////////-->
        <div class="col-xl-3">
            <h6 class="card-header text-center text-info font-weight-bold">KATEGORİ-1</h6>
            <div class="card shadow-lg" style="height: 300px">
                <h6 class="card-header text-center text-danger font-weight-bold">SORU</h6>
                <div class="card-body">
                    <p class="card-text">"Sebil ve Güvercinler " adlı eser kime aittir?</p>
                </div>
            </div>
            <div class="card shadow-lg mb-1" style="height:150px">
                <h6 class="card-header text-center text-primary font-weight-bold">CEVAP</h6>
                <div class="card-body">
                    <p class="card-text">Ziya Osman Saba</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Aday Listesi -->
<div class="col-xl-12 m-0 mt-2" id="AdayListesi">
    @await Component.InvokeAsync("AdayMulakatListe")
</div>



<!-- uyarı Modal-->
<div class="modal fade modal-xl" id="ModalUyari" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">UYARI</h5>
                <button class="close" type="button" data-dismiss="modal" aria-label="Close" onclick="kapat()">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body" id="modaltext"></div>
            <div class="modal-footer">
                <button class="btn btn-primary" type="submit" data-dismiss="modal" id="btnOk" onclick="kapat()">Tamam</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal Sınav İptal-->
<div class="modal" id="ModalSinavIptal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title text-center" id="exampleModalLabel">Aday Sınav İptali Açıklama</h5>
                <button class="close" type="button" data-dismiss="modal" aria-label="Close" onclick="kapat()">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body" id="modalSinavIptalBody">
                <div class="row">
                    <div class="col-md-12">
                        <form action="/" method="post">
                            <div class="form-row mb-1">
                                <div class="form-group col-md-12">
                                    <textarea placeholder="Sınav iptaline ilişkin açıklamaları buraya yazınız..." class="form-control" id="AciklamaTextArea" rows="10"></textarea>
                                 </div>
                            </div>
                            <div class="form-row mb-1 justify-content-center">
                                <button class="btn btn-primary col-md-12" type="submit" data-dismiss="modal" id="btnOk" onclick="kapat()">Kaydet</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {

    <partial name="_ValidationScriptsPartial" />
    <script src="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/alertify.min.js"></script>

    <script type="text/javascript">

        document.getElementById("soruno").focus;


        $('#btnBaslat').click(function () {

            //var saniye = 0;
            //var dakika = 0;
            //var sayac = 0;
            document.getElementById("soruno").focus();
            var soruno = $("#soruno").val();
            alert(soruno);
            if (soruno > 0) {

                $("#btnBitir").show();
                $("#btnBaslat").hide();
                $('#soruBlok').show();
            }
            else {

                bootbox.confirm({
                    message: "Soru Numarası Yazınız...",
                    buttons: {
                        confirm: {
                            label: 'Tamam',
                            className: 'btn-success'
                        },
                    },
                    callback: function (result) {
                        if (result) {

                            document.getElementById("soruno").focus();
                        }
                    }
                });
            }

        });

        $('#btnIptal').click(function () {

            $('#ModalSinavIptal').modal('show');
        });

        $('#btnBitir').click(function () {

            $('#soruBlok').hide();
            $('#AdayNotBlok').show();
        });

        $('#btnBilgiFormKapat').click(function () {

            $('#AdayBilgiBlok').hide();

        });

        //Aday Bilgi Formu Butonu
        $('#btnBilgi').click(function () {

            $('#AdayBilgiBlok').show();

        });
        
        //Aday Çağrı Butonu
        $("#myTableE").on("click", ".btnCagri", function () {

            var btn = $(this);
            var id = btn.data("id");
            alert(id);      

        });

        //Aday Sınava Al Butonu
        $("#myTableE").on("click", ".btnSinavaAl", function () {

            var btn = $(this);
            var id = btn.data("id");
            alert(id);

        });

        
        
        
        //            //////////////////////sayaç için başlangıç//////////////

        var myVar = setInterval(myTimer, 1000);
        document.getElementById("saniye").innerHTML = "00";
        document.getElementById("dakika").innerHTML = "00";

        $('.toast').toast('hide')

        ////$("#derece").change(function () {


        ////        document.getElementById("soruno").focus();
        ////        var soru = $("#soruno").val();
        ////        if (parseInt(soru) > 0) {

        ////            document.getElementById("soruno").text = ""
        ////        }
        ////        else {

        ////        }

        ////});

        //$("#baslat").click(function () {

        /*var selectedText = $("#derece").find("option:selected").text();*/


        //    if (selectedText.toString() == "Seçim yapınız") {

        //        $('#ModalUyari').modal('show');
        //        document.getElementById("modaltext").innerHTML = "Derece seçiniz !"
        //    }
        //    else {

        /*var soruno = $("#soruno").val();*/
        /*var obj = { selectedText: "Öğretmen", soruno = "5"};*/


        //        if (soruno.toString() == "") {

        //            $('#ModalUyari').modal('show');
        //            document.getElementById("modaltext").innerHTML = "Soru numarası yazınız !"
        //        }
        //        else {
        //$("#baslat").click(function () {
        //    $.ajax({
        //        type: "GET",
        //        url: "/Mulakat/MulakatSoruGetir/" + soruno & selectedText,
        //    });
        //};
        //var derece = "Öğretmen";
        //var soruno = 5;
        
        
        //if (sayac > 0) {

        //function myTimer() {

        //       // clearInterval(myVar);
        //        var saniye = 0;
        //        var dakika = 0;
        //        var sayac = 0;
        //    }
        //}
        // else {
        //function myTimer() {

        //    saniye = saniye + 1;
        //    sayac = sayac + 1;


        //    if (saniye < 10) {
        //        document.getElementById("saniye").innerHTML = "0" + saniye;
        //        document.getElementById("dakika").innerHTML = "00";
        //    }
        //    else {
        //        document.getElementById("saniye").innerHTML = saniye;
        //    }
        //    if (saniye > 59) {
        //        dakika = dakika + 1;
        //        document.getElementById("dakika").innerHTML = "0" + dakika;
        //        saniye = 0;
        //        document.getElementById("saniye").innerHTML = "00";
        //    }
        //    if (dakika > 0) {
        //        document.getElementById("dakika").innerHTML = "0" + dakika;
        //    }
        //    if (saniye > 5) {
        //        $('.toast').toast('show')
        //    }

        //    //if (document.getElementById("sayac").hidden = false) {
        //    //    document.getElementById("sayac").hidden = true;
        //    //}
        //    //else {
        //    //    document.getElementById("sayac").hidden = false;
        //    //}

        //}
        // }
        //        }
        //    }
        //});

        //function kapat() {
        //    $('#ModalUyari').modal('hide');

        //    var deger = $("#modaltext").find("option:selected").text();
        //    if (deger = "Derece seçiniz !") {
        //        document.getElementById("derece").focus();
        //    }
        //    //var deger1 = $("#modaltext").find("option:selected").text();
        //    //if (deger1 = "Soru numarası yazınız !") {
        //    //    document.getElementById("soruno").focus();
        //    //}
        //};
    </script>
}
